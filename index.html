<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>体重・食事目標 自動計算ツール</title>
  <style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: #f7f7f7;
    margin: 0;
    padding: 12px;
  }

  .container {
    max-width: 640px;
    margin: auto;
    background: #fff;
    padding: 16px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  }

  h1 {
    font-size: 1.3rem;
    margin-bottom: 16px;
  }

  .field { margin-bottom: 16px; }

  label {
    display: block;
    margin-bottom: 6px;
    font-weight: 600;
  }

  input, select {
    width: 100%;
    padding: 10px;
    border-radius: 6px;
    border: 1px solid #ccc;
    font-size: 1rem;
  }

  .result {
    background: #f0f4ff;
    padding: 16px;
    border-radius: 8px;
    margin-top: 24px;
  }

  /* 結果行：スマホでも横並びを維持 */
  .result-row {
    display: flex;
    align-items: center;
    gap: 8px;
    margin: 12px 0;
  }

  .result-content { flex: 1; }

  .result-text {
    font-weight: 600;
    line-height: 1.4;
  }

  button.copy {
    background: #e0e0e0;
    color: #000;
    padding: 10px 12px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-size: 0.95rem;
    min-width: 96px;
  }

  .copy-primary {
    background: #2563eb;
    color: #fff;
    font-weight: 700;
  }

  .copy-primary:active {
    transform: scale(0.98);
  }

  .note {
    margin-top: 6px;
    font-size: 0.75rem;
    color: #555;
    line-height: 1.4;
  }

  /* トースト */
  .toast {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0,0,0,0.8);
    color: #fff;
    padding: 10px 16px;
    border-radius: 20px;
    font-size: 0.9rem;
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
    z-index: 999;
  }

  .toast.show { opacity: 1; }
</style>
</head>
<body>
  <div class="container">
    <h1>体重・食事目標 自動計算ツール</h1>

    <div class="field">
      <label>身長（m）</label>
      <input type="number" step="0.01" id="height" placeholder="例：1.70" />
    </div>

    <div class="field">
      <label>現在の体重（kg）</label>
      <input type="number" step="0.1" id="currentWeight" placeholder="例：70" />
    </div>

    <div class="field">
      <label>長期的な目標BMI</label>
      <select id="bmi">
        <option value="22" selected>22</option>
        <option value="25">25</option>
      </select>
    </div>

    <div class="field">
      <label>半年後の減量目標</label>
      <select id="reduction">
        <optgroup label="体重で設定">
          <option value="kg_2">−2kg</option>
        </optgroup>
        <optgroup label="減量率で設定">
          <option value="rate_3">3%</option>
          <option value="rate_4">4%</option>
          <option value="rate_5">5%</option>
          <option value="rate_6">6%</option>
          <option value="rate_7">7%</option>
          <option value="rate_8">8%</option>
          <option value="rate_9">9%</option>
          <option value="rate_10">10%</option>
        </optgroup>
      </select>
    </div>

    <div class="field">
      <label>身体活動量</label>
      <select id="intake">
        <option value="25">25（座っていることが多い生活：デスクワーク・運転が中心）</option>
        <option value="30" selected>30（立つ／歩くことが多い生活：接客・販売・家事が多い）</option>
        <option value="35">35（体を使う仕事や運動習慣がある生活：工事・運送・週3回以上の運動）</option>
      </select>
    </div>

    <div class="result">
      <div class="result-row">
        <span class="result-text" id="r1">① 長期的な体重目標：— kg</span>
      </div>

      <div class="result-row">
        <div class="result-content">
          <span class="result-text" id="r2">② 半年後の体重目標：— kg</span><br/>
          <span class="note">シンクヘルスアプリの下部右「もっと見る ＞ 目標 ＞ 目標体重」に②の値を入力してください</span>
        </div>
        <button class="copy copy-primary" onclick="copyText('r2')">ここを押す<br/>（コピー）</button>
      </div>

      <div class="result-row">
        <div class="result-content">
          <span class="result-text" id="r3">③ 食事摂取量の目標：— kcal / 日</span><br/>
          <span class="note">シンクヘルスアプリの下部右「もっと見る ＞ 目標 ＞ 食事 ＞ カロリー」に③の値を入力してください</span>
        </div>
        <button class="copy copy-primary" onclick="copyText('r3')">ここを押す<br/>（コピー）</button>
      </div>
    </div>

    <div class="note">
      ※ 本ツールは目安値を示すものであり、医療行為・診断を目的としたものではありません。<br/>
      ※ 入力されたデータは保存・送信されません。
    </div>
  </div>

  <script>
    const inputs = document.querySelectorAll('input, select');
    inputs.forEach(el => el.addEventListener('input', calculate));

    function calculate() {
      const h = parseFloat(height.value);
      const w = parseFloat(currentWeight.value);
      if (!h || !w) return;

      const bmiVal = parseFloat(bmi.value);
      const targetYear = h * h * bmiVal;
      const intakeVal = parseFloat(intake.value);

      let target;
      if (reduction.value.startsWith('rate')) {
        const rate = parseFloat(reduction.value.split('_')[1]);
        target = w * (100 - rate) / 100;
      } else {
        target = w - 2;
      }

      const kcal = target * intakeVal;

      r1.textContent = `① 長期的な体重目標：${targetYear.toFixed(1)} kg`;
      r2.textContent = `② 目標体重：${target.toFixed(1)} kg`;
      r2.dataset.value = target.toFixed(1);
      r3.textContent = `③ 食事エネルギー目標：${Math.round(kcal)} kcal / 日`;
      r3.dataset.value = Math.round(kcal);
    }

    function copyText(id) {
      const el = document.getElementById(id);
      const value = el.dataset.value || '';
      navigator.clipboard.writeText(value);
      showToast('数字のみコピーしました');
    }
    function showToast(message) {('数字のみコピーしました');
    }
    function showToast(message) {
      let toast = document.querySelector('.toast');
      if (!toast) {
        toast = document.createElement('div');
        toast.className = 'toast';
        document.body.appendChild(toast);
      }
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 1200);
    }
  </script>
</body>
</html>


